---
// Methodology preview — Projekt Loop
const steps = [
  {
    number: '01',
    title: 'Discover',
    description: 'Imersão no negócio, mapeamento de stakeholders e definição precisa do problema antes de qualquer linha de código.',
  },
  {
    number: '02',
    title: 'Design',
    description: 'Arquitetura de solução, roadmap de produto e UX/UI — tomando decisões com dados e contexto de negócio.',
  },
  {
    number: '03',
    title: 'Build',
    description: 'Desenvolvimento iterativo com code review rigoroso, testes automatizados e CI/CD desde o primeiro dia.',
  },
  {
    number: '04',
    title: 'Evolve',
    description: 'Go-live, monitoramento, métricas e melhoria contínua. O projeto não termina no deploy — ele amadurece.',
  },
];
---

<section class="section methodology-preview" aria-labelledby="methodology-title">
  <div class="container" style="max-width:1280px;margin:0 auto;padding:0 1.5rem;">
    <!-- Header -->
    <div class="method-header reveal">
      <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap;margin-bottom:1rem;">
        <span class="section-label">Metodologia</span>
        <div class="method-badge">
          <span class="mono" style="font-size:0.75rem;color:var(--accent-neon);">// proprietary</span>
        </div>
      </div>
      <h2 id="methodology-title" class="section-title">
        <span class="gradient-text">Projekt Loop</span>
      </h2>
      <p class="section-subtitle">
        Nossa metodologia proprietária que une discovery estruturado, design intencional e delivery contínuo para resultados previsíveis.
      </p>
    </div>

    <!-- Timeline -->
    <div class="method-timeline">
      <!-- Connector line (desktop) -->
      <div class="timeline-connector" aria-hidden="true"></div>

      {steps.map((step, i) => (
        <div class={`method-step reveal reveal-delay-${i + 1}`}>
          <!-- Number bubble -->
          <div class="step-bubble">
            <span class="step-number">{step.number}</span>
          </div>

          <!-- Content -->
          <div class="step-content">
            <h3 class="step-title">{step.title}</h3>
            <p class="step-description">{step.description}</p>
          </div>
        </div>
      ))}
    </div>

    <!-- CTA -->
    <div class="method-cta reveal">
      <a href="/metodologia" class="method-link">
        Ver metodologia completa
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>
  </div>
</section>

<style>
  .methodology-preview {
    position: relative;
    background: var(--bg);
  }

  .method-header {
    max-width: 640px;
    margin-bottom: 4rem;
  }

  .method-badge {
    display: inline-flex;
    padding: 0.2rem 0.75rem;
    background: rgba(var(--accent-neon-rgb), 0.08);
    border: 1px solid rgba(var(--accent-neon-rgb), 0.25);
    border-radius: 999px;
  }

  /* Timeline */
  .method-timeline {
    position: relative;
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    margin-bottom: 3rem;
  }

  .timeline-connector {
    position: absolute;
    top: 28px;
    left: calc(12.5% + 20px);
    right: calc(12.5% + 20px);
    height: 2px;
    background: linear-gradient(90deg, var(--accent), var(--accent-2), var(--accent-neon), var(--accent-2));
    z-index: 0;
    opacity: 0.4;
  }

  .method-step {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 1.25rem;
    position: relative;
    z-index: 1;
  }

  .step-bubble {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--surface);
    border: 2px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 250ms ease;
    flex-shrink: 0;
  }

  .method-step:hover .step-bubble {
    border-color: var(--accent);
    background: rgba(var(--accent-rgb), 0.08);
    box-shadow: 0 0 20px rgba(var(--accent-rgb), 0.25);
  }

  .step-number {
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--accent);
    letter-spacing: 0.05em;
  }

  .step-content {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .step-title {
    font-family: 'Syne', sans-serif;
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text);
    letter-spacing: -0.02em;
    margin: 0;
  }

  .step-description {
    font-size: 0.875rem;
    color: var(--text-muted);
    line-height: 1.65;
    margin: 0;
  }

  /* CTA */
  .method-cta {
    display: flex;
    justify-content: center;
  }

  .method-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-family: 'Syne', sans-serif;
    font-size: 1.0625rem;
    font-weight: 700;
    color: var(--accent);
    text-decoration: none;
    -webkit-text-fill-color: var(--accent);
    padding: 0.75rem 1.5rem;
    border: 1.5px solid rgba(var(--accent-rgb), 0.3);
    border-radius: var(--radius-md);
    transition: all 250ms ease;
  }

  .method-link:hover {
    background: rgba(var(--accent-rgb), 0.06);
    border-color: var(--accent);
    gap: 0.75rem;
    -webkit-text-fill-color: var(--accent);
    opacity: 1;
  }

  @media (max-width: 900px) {
    .method-timeline {
      grid-template-columns: repeat(2, 1fr);
      gap: 2rem;
    }

    .timeline-connector {
      display: none;
    }
  }

  @media (max-width: 560px) {
    .method-timeline {
      grid-template-columns: 1fr;
    }

    .method-step {
      flex-direction: row;
      align-items: flex-start;
    }

    .step-bubble {
      width: 48px;
      height: 48px;
      flex-shrink: 0;
    }
  }
</style>
